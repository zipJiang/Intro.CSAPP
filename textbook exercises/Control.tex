\documentclass[10pt a4paper]{article}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{geometry}
\usepackage{engord}
\usepackage{multirow}
\usepackage{cases}
\geometry{left=2.0cm, right=2.0cm}
\lstset{language=C}
\lstset{breaklines}
\lstset{extendedchars=false}
\begin{document}
  \textbf{3.13}
  \begin{lstlisting}
    cmpl  %esi, %edi
    setl  %al

    int compare(int a, int b)
      return a > b;
  \end{lstlisting}

  \textbf{3.15}
  \begin{lstlisting}
    //A
    4003fa: 74 02      je 4003fe
    4003fc: ff d0      callq *%rax

    //B
    40042f: 74 f4      je 40042b
    400431: 5d         pop %rbp
  \end{lstlisting}

  \textbf{3.16}
  \begin{lstlisting}
    void cond(long a, long b) {
      if(p && a > *p)
        *p = a;
    }

    //transform
    void cond(long a, long b) {
      if(!p)
        goto L1;
      else if(a <= *p)
        goto L1;
      *p = a;
      L1:
        return;
    }
  \end{lstlisting}

  \textbf{3.18}
  \begin{lstlisting}
    long test(long x, long y, long z) {
      long val = x + y;
      if(val += z < -3) {
        if(y < z) {
          val = x * y;
        }
        else {
          val = y * z;
        }
      }
      else if(x > 2) {
        val = x * z;
      }
      return val;
    }
  \end{lstlisting}

  \textbf{3.19}
  \begin{equation*}
    \begin{split}
      T_{ave}(p) &= T_{ok} + p \cdot T_{p} \\
      T_{p} &= \frac{T_{ave} - T_{ok}}{p}
    \end{split}
  \end{equation*}

  \textbf{3.21}
  \begin{lstlisting}
    #define OP /

    long arith(long x) {
    //for negative number a bias of (8 - 1) is needed
      return x OP 8
    }
  \end{lstlisting}

  \textbf{3.24}
  \begin{lstlisting}
    long loop_while(long a, long b) {
      long result = 1;
      while(a > b) {
        result = (a + b) * result;
        a = a + 1;
      }
      return result;
    }
  \end{lstlisting}

\end{document}
